package vn.edu.app.client.ui;

import vn.edu.app.common.dto.UserDTO;
import vn.edu.app.client.ui.student.*;
import vn.edu.app.client.ui.admin.*;

import javax.swing.*;
import java.awt.*;
import java.util.LinkedHashMap;
import java.util.Map;

public class MainFrame extends JFrame {
    private CardLayout card = new CardLayout();
    private JPanel content = new JPanel(card);

    public MainFrame(UserDTO user) {
        setTitle("Dashboard - " + user.getRole());
        setSize(1000, 600);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLocationRelativeTo(null);

        JPanel sidebar = new JPanel(new GridLayout(0,1,0,10));
        sidebar.setBackground(new Color(40,45,60));
        sidebar.setPreferredSize(new Dimension(180,0));

        Map<String, JPanel> map = new LinkedHashMap<>();
        if ("STUDENT".equalsIgnoreCase(user.getRole())) {
            map.put("Profile", new StudentProfilePanel(user));
            map.put("Grades", new StudentGradesPanel(user));
        } else {
            map.put("Students", new StudentManagementPanel());
            map.put("Classes", new ClassManagementPanel());
            map.put("Courses", new CourseManagementPanel());
            map.put("Grades", new GradeManagementPanel());
            map.put("Reports", new ReportPanel());
        }

        for (var entry : map.entrySet()) {
            String name = entry.getKey();
            JPanel panel = entry.getValue();
            JButton btn = new JButton(name);
            btn.setFocusPainted(false);
            btn.setBackground(new Color(60,65,85));
            btn.setForeground(Color.WHITE);
            sidebar.add(btn);
            content.add(panel, name);
            btn.addActionListener(e -> card.show(content, name));
        }

        add(sidebar, BorderLayout.WEST);
        add(content, BorderLayout.CENTER);
        card.show(content, map.keySet().iterator().next());
    }
}
